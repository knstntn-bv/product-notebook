# Проблема:

Не очень удобна структура гипотез - на один инсайт много проблем и много решений.

# Решение

Необходимо добавить возможность дублировать гипотезы на базе одного инсайта - так получится хотя бы под уже сформулированные проблемы сделать много отдельных записей.

## Ожидаемое поведение

- В интерфейсе редактирования гипотезы появляется дополнительная кнопка "Clone" - где-то рядом с кнопкой создания фичи.
- По нажатию кнопки создаётся новая гипотеза, ровно с таким же содержанием полей, как и у текущей на данный момент.
- В фокусе редактора остаётся исходная гипотеза; для редактирования клонированой надо закрыть/сохранить текущую и открыть отдельно новую.

---

## Реализация

**Дата реализации:** 2024-12-04

### Что сделано:

1. **Добавлена кнопка "Clone"** в правую панель редактора гипотез (EntityDialog), размещена после кнопки "Create Feature"
   - Кнопка видна только при редактировании существующей гипотезы
   - Использует иконку `Copy` из `lucide-react`
   - Отключается во время выполнения операции клонирования

2. **Реализована мутация клонирования** (`cloneHypothesisMutation`):
   - Копирует все поля гипотезы: status, insight, problem_hypothesis, problem_validation, solution_hypothesis, solution_validation, impact_metrics
   - Создает новую запись в БД с новым UUID и текущими временными метками
   - Автоматически обновляет список гипотез после успешного клонирования

3. **Обработчик клонирования** (`handleCloneHypothesis`):
   - Использует текущее состояние из редактора (включая несохраненные изменения)
   - Исходная гипотеза остается открытой в редакторе после клонирования
   - Показывает toast-уведомление об успешном клонировании или ошибке

### Технические детали:

- Файл изменений: `src/pages/HypothesesPage.tsx`
- Используется существующая инфраструктура React Query для мутаций и кэширования
- Клонирование происходит синхронно с обновлением UI через invalidation queries

