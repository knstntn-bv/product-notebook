# Проблема

Сортировка по статусам гипотез отражает текущий прогресс, но не их важность - и не даёт понять, за какую следует браться дальше.

# Решение

Следует ввести дополнительное поле приоритета гипотезы и опцию сортировки по нему.

# Реализация

## Данные

У каждой гипотезы появляется поле приоритета. Поле числовое. Поле обязательное, значение по умолчанию - 3.

## Управление

Поле можно изменить в любой момент, без дополнительных условий, как при создании, так и при редактировании гипотезы. Контрол для редактирования - строка для ввода в правой части редактора гипотез.

## Поведение

Приоритет следует отображать в таблице гипотез, второй колонкой.

Необходима возможность включить сортировку таблицы гипотез по приоритету, как по возрастанию, так и по убыванию. В случае равных приоритетов строки таблицы сортируются по статусу (согласно той настройке, которая была активна до того).

Сортировка переключается нажатием на заголовок колонки, активная обозначается стрелкой вверх-вниз рядом с названием колонки.

---

## Реализация

**Статус**: ✅ Реализовано

**Дата реализации**: 2026-01-09

### Выполненные изменения:

1. **Добавлено поле приоритета в БД**:
   - Создана миграция: добавлено поле `priority integer NOT NULL DEFAULT 3` в таблицу `hypotheses`
   - Все существующие гипотезы получили приоритет = 3
   - Обновлена финальная схема БД

2. **Добавлена колонка Priority в таблицу**:
   - Колонка Priority отображается второй (после Status)
   - Отображает числовое значение приоритета
   - Добавлена возможность сортировки по приоритету (asc/desc)
   - Стрелки сортировки отображаются в заголовке колонки

3. **Добавлено поле Priority в редактор**:
   - Поле находится в правой части редактора, после поля Status
   - Тип поля: text (без стрелок вверх/вниз)
   - Валидация: значения от 1 до 99
   - Значение по умолчанию: 3
   - Поддержка inputMode="numeric" для мобильных устройств

4. **Реализована сортировка по приоритету**:
   - Сортировка по возрастанию/убыванию приоритета
   - Вторичная сортировка по статусу при равных приоритетах (если активна сортировка по статусу)
   - Поддержка одновременной активности сортировок по приоритету и статусу

5. **Обновлены все CRUD операции**:
   - Запросы получения гипотез включают поле priority
   - Создание гипотезы: приоритет по умолчанию = 3
   - Обновление гипотезы: поддержка изменения приоритета
   - Клонирование гипотезы: приоритет копируется

### Файлы изменений:
- `supabase/migrations/20260109183835_add_done_status_and_priority_to_hypotheses.sql`
- `supabase/migrations/final_full_schema.sql`
- `src/pages/HypothesesPage.tsx`
- `src/integrations/supabase/types.ts`
- `docs/data-model.md`
- `docs/testing-checklist-hypothesis-priority-status-sort.md` (новый)
