# Проблема

Существующие статусы несут мало информации и неудобны для сортировки.

# Решение

## Задать явный порядок статусов

Статусы должны иметь следующий порядок:

New
In work
Accepted
Done
Rejected

Этот порядок должен использоваться и в меню выбора в редакторе, и при включении режима сортировки по статусу

## Добавить режим сортировки по статусу

Необходимо реализовать возможность включить сортировку таблицы гипотез по статусу, как по возрастанию, так и по убыванию. В случае совпадения статусов строки сортируются по приоритету (в том варианте, который был активен до того).

Сортировка переключается нажатием на заголовок колонки, активная обозначается стрелкой вверх-вниз рядом с названием колонки.

---

## Реализация

**Статус**: ✅ Реализовано

**Дата реализации**: 2026-01-09

### Выполненные изменения:

1. **Добавлен новый статус "done"**:
   - Обновлена миграция БД: добавлен статус "done" в CHECK constraint
   - Обновлён тип `Status` в TypeScript: добавлен `"done"`
   - Обновлён массив `statuses` с правильным порядком: New → In work → Accepted → Done → Rejected

2. **Реализована сортировка по статусу**:
   - Добавлена возможность сортировки по возрастанию/убыванию статуса
   - Реализована вторичная сортировка по приоритету при равных статусах
   - Добавлены стрелки сортировки (ArrowUp/ArrowDown) в заголовке колонки Status
   - Сортировка переключается тремя кликами: asc → desc → отключено

3. **Обновлён порядок статусов**:
   - Порядок статусов используется в меню выбора в редакторе
   - Порядок статусов используется при сортировке таблицы
   - Обновлён объект `statusOrder` для корректной сортировки всех 5 статусов

### Файлы изменений:
- `supabase/migrations/20260109183835_add_done_status_and_priority_to_hypotheses.sql`
- `supabase/migrations/final_full_schema.sql`
- `src/pages/HypothesesPage.tsx`
- `src/integrations/supabase/types.ts`
- `docs/data-model.md`
