# Чеклист тестирования: Приоритеты гипотез и обновление сортировки по статусам

## Обзор

Чеклист для тестирования реализации двух требований:
- **ESS-62**: Обновление структуры статусов гипотез (порядок статусов, улучшенная сортировка)
- **NEW**: Возможность задать приоритеты для гипотез

---

## Подготовка к тестированию

### Предварительные условия
- [ ] Миграция БД применена (`20260109183835_add_done_status_and_priority_to_hypotheses.sql`)
- [ ] Приложение запущено и работает
- [ ] Есть доступ к странице Hypotheses
- [ ] В системе есть хотя бы несколько гипотез с разными статусами (для тестирования сортировки)

---

## 1. Тестирование базы данных

### 1.1 Проверка миграции
- [ ] Все существующие гипотезы имеют поле `priority = 3`
- [ ] В БД доступен новый статус `"done"` в CHECK constraint
- [ ] Новые гипотезы создаются с `priority = 3` по умолчанию
- [ ] Поле `priority` имеет тип `integer NOT NULL DEFAULT 3`

### 1.2 Проверка структуры данных
- [ ] В таблице `hypotheses` есть колонка `priority`
- [ ] CHECK constraint для `status` включает все 5 статусов: `'new', 'inProgress', 'accepted', 'done', 'rejected'`

---

## 2. Тестирование UI таблицы

### 2.1 Отображение колонки Priority
- [ ] Колонка Priority отображается в таблице гипотез
- [ ] Колонка Priority находится второй (после колонки Status)
- [ ] В колонке Priority отображаются числовые значения приоритетов
- [ ] Значения приоритетов корректно отображаются для всех гипотез
- [ ] Если приоритет отсутствует, отображается значение по умолчанию (3)

### 2.2 Стрелки сортировки
- [ ] При клике на заголовок "Priority" появляется стрелка вверх (сортировка по возрастанию)
- [ ] При повторном клике стрелка меняется на вниз (сортировка по убыванию)
- [ ] При третьем клике стрелка исчезает (сортировка отключена)
- [ ] Стрелки отображаются корректно (иконки ArrowUp/ArrowDown)

---

## 3. Тестирование сортировки по приоритету

### 3.1 Сортировка по возрастанию
- [ ] При активации сортировки по возрастанию гипотезы сортируются от меньшего приоритета к большему
- [ ] Гипотезы с приоритетом 1 идут первыми
- [ ] Гипотезы с приоритетом 99 идут последними
- [ ] Гипотезы с одинаковым приоритетом сохраняют относительный порядок (или сортируются по статусу, если активна сортировка по статусу)

### 3.2 Сортировка по убыванию
- [ ] При активации сортировки по убыванию гипотезы сортируются от большего приоритета к меньшему
- [ ] Гипотезы с приоритетом 99 идут первыми
- [ ] Гипотезы с приоритетом 1 идут последними

### 3.3 Вторичная сортировка по статусу
- [ ] При равных приоритетах и активной сортировке по статусу гипотезы сортируются по статусу
- [ ] Порядок статусов при вторичной сортировке: New → In work → Accepted → Done → Rejected

### 3.4 Отключение сортировки
- [ ] При третьем клике на заголовок "Priority" сортировка отключается
- [ ] После отключения таблица возвращается к исходному порядку (по created_at)

---

## 4. Тестирование сортировки по статусу

### 4.1 Порядок статусов
- [ ] Порядок статусов в меню выбора соответствует требованиям: New → In work → Accepted → Done → Rejected
- [ ] Все 5 статусов присутствуют в меню выбора
- [ ] Статус "Done" отображается в меню с лейблом "Done"

### 4.2 Сортировка по возрастанию статуса
- [ ] При активации сортировки по возрастанию гипотезы сортируются: New → In work → Accepted → Done → Rejected
- [ ] Гипотезы со статусом "New" идут первыми
- [ ] Гипотезы со статусом "Rejected" идут последними

### 4.3 Сортировка по убыванию статуса
- [ ] При активации сортировки по убыванию гипотезы сортируются в обратном порядке: Rejected → Done → Accepted → In work → New
- [ ] Гипотезы со статусом "Rejected" идут первыми
- [ ] Гипотезы со статусом "New" идут последними

### 4.4 Вторичная сортировка по приоритету
- [ ] При равных статусах гипотезы сортируются по приоритету (по возрастанию)
- [ ] Вторичная сортировка работает корректно

### 4.5 Отключение сортировки
- [ ] При третьем клике на заголовок "Status" сортировка отключается
- [ ] После отключения таблица возвращается к исходному порядку

---

## 5. Тестирование взаимодействия сортировок

### 5.1 Одновременная активность сортировок
- [ ] Можно включить сортировку по приоритету, когда активна сортировка по статусу
- [ ] Можно включить сортировку по статусу, когда активна сортировка по приоритету
- [ ] Обе сортировки могут быть активны одновременно
- [ ] Стрелки отображаются корректно для обеих колонок

### 5.2 Приоритет сортировок
- [ ] При активной сортировке по приоритету она имеет приоритет над сортировкой по статусу
- [ ] При активной сортировке по статусу она имеет приоритет над сортировкой по приоритету
- [ ] Вторичная сортировка применяется только при равенстве значений основной сортировки

### 5.3 Комбинированная сортировка
- [ ] Сортировка по приоритету + вторичная по статусу работает корректно
- [ ] Сортировка по статусу + вторичная по приоритету работает корректно

---

## 6. Тестирование редактора гипотез

### 6.1 Отображение поля Priority
- [ ] Поле Priority отображается в правой части редактора гипотез
- [ ] Поле Priority находится после поля Status
- [ ] Поле Priority имеет тип "text" (без стрелок вверх/вниз)
- [ ] На мобильных устройствах показывается цифровая клавиатура (inputMode="numeric")

### 6.2 Создание новой гипотезы
- [ ] При создании новой гипотезы поле Priority имеет значение по умолчанию 3
- [ ] Можно изменить приоритет перед сохранением
- [ ] Новая гипотеза сохраняется с указанным приоритетом
- [ ] Если приоритет не указан, используется значение по умолчанию 3

### 6.3 Редактирование приоритета
- [ ] При открытии существующей гипотезы отображается её текущий приоритет
- [ ] Можно изменить приоритет существующей гипотезы
- [ ] Изменения сохраняются корректно
- [ ] После сохранения приоритет отображается в таблице

### 6.4 Валидация приоритета
- [ ] Можно ввести число от 1 до 99
- [ ] При вводе числа меньше 1 значение не применяется (или применяется с валидацией)
- [ ] При вводе числа больше 99 значение не применяется (или применяется с валидацией)
- [ ] Можно очистить поле (пустая строка)
- [ ] Placeholder показывает "3"

### 6.5 Клонирование гипотезы
- [ ] При клонировании гипотезы приоритет копируется
- [ ] Клонированная гипотеза имеет тот же приоритет, что и оригинал
- [ ] Можно изменить приоритет клонированной гипотезы перед сохранением

---

## 7. Тестирование статуса "Done"

### 7.1 Доступность статуса
- [ ] Статус "Done" доступен в меню выбора статусов
- [ ] Статус "Done" отображается с лейблом "Done"
- [ ] Статус "Done" находится в правильной позиции в меню (после "Accepted", перед "Rejected")

### 7.2 Создание гипотезы со статусом "Done"
- [ ] Можно создать новую гипотезу со статусом "Done"
- [ ] Гипотеза сохраняется с статусом "Done"
- [ ] Статус "Done" корректно отображается в таблице

### 7.3 Изменение статуса на "Done"
- [ ] Можно изменить статус существующей гипотезы на "Done"
- [ ] Изменение сохраняется корректно
- [ ] Статус "Done" корректно отображается в таблице после сохранения

### 7.4 Сортировка со статусом "Done"
- [ ] Гипотезы со статусом "Done" сортируются в правильном порядке (после "Accepted", перед "Rejected")
- [ ] Сортировка работает корректно для всех 5 статусов

---

## 8. Тестирование на разных устройствах

### 8.1 Десктоп
- [ ] Таблица отображается корректно на десктопе
- [ ] Колонки имеют правильную ширину
- [ ] Сортировка работает корректно
- [ ] Редактор отображается корректно

### 8.2 Мобильные устройства
- [ ] Таблица прокручивается горизонтально на мобильных устройствах
- [ ] Колонки имеют минимальную ширину (min-w-[80px] для Priority)
- [ ] Сортировка работает корректно на мобильных
- [ ] Редактор отображается корректно на мобильных
- [ ] Цифровая клавиатура появляется при фокусе на поле Priority

---

## 9. Тестирование граничных случаев

### 9.1 Пустые данные
- [ ] Если у гипотезы нет приоритета, отображается значение по умолчанию (3)
- [ ] Если приоритет null, используется значение по умолчанию (3)

### 9.2 Крайние значения приоритета
- [ ] Можно установить приоритет = 1
- [ ] Можно установить приоритет = 99
- [ ] Сортировка работает корректно с крайними значениями

### 9.3 Большое количество гипотез
- [ ] Сортировка работает корректно при большом количестве гипотез (10+)
- [ ] Производительность сортировки приемлемая
- [ ] UI не тормозит при переключении сортировок

### 9.4 Одновременное редактирование
- [ ] Можно редактировать несколько гипотез подряд
- [ ] Приоритет сохраняется корректно для каждой гипотезы
- [ ] Нет конфликтов при одновременном редактировании

---

## 10. Регрессионное тестирование

### 10.1 Существующий функционал
- [ ] Создание гипотезы работает как раньше (кроме добавления приоритета)
- [ ] Редактирование гипотезы работает как раньше
- [ ] Удаление гипотезы работает как раньше
- [ ] Клонирование гипотезы работает как раньше
- [ ] Создание фичи из гипотезы работает как раньше
- [ ] Все остальные поля гипотезы работают корректно

### 10.2 Интеграция с другими страницами
- [ ] Гипотезы отображаются корректно на других страницах (если используются)
- [ ] Связи с фичами работают корректно
- [ ] Нет ошибок в консоли браузера

---

## 11. Проверка ошибок и валидации

### 11.1 Обработка ошибок
- [ ] При ошибке сохранения приоритета показывается сообщение об ошибке
- [ ] При ошибке загрузки гипотез показывается сообщение об ошибке
- [ ] Нет необработанных исключений в консоли

### 11.2 Валидация данных
- [ ] Невозможно сохранить приоритет меньше 1
- [ ] Невозможно сохранить приоритет больше 99
- [ ] Невозможно сохранить нечисловое значение приоритета

---

## 12. Финальная проверка

### 12.1 Соответствие требованиям ESS-62
- [ ] Порядок статусов: New → In work → Accepted → Done → Rejected
- [ ] Сортировка по статусу работает корректно
- [ ] Порядок статусов используется в меню выбора
- [ ] Порядок статусов используется при сортировке

### 12.2 Соответствие требованиям NEW (приоритеты)
- [ ] Поле приоритета добавлено в таблицу (вторая колонка)
- [ ] Поле приоритета добавлено в редактор (правая часть)
- [ ] Приоритет по умолчанию = 3
- [ ] Сортировка по приоритету работает корректно
- [ ] Вторичная сортировка работает корректно

---

## Заметки для тестировщика

### Известные проблемы
- (Заполнить при обнаружении)

### Рекомендации
- Тестировать на разных браузерах (Chrome, Firefox, Safari, Edge)
- Тестировать с разным количеством гипотез (1, 5, 10, 50+)
- Тестировать с гипотезами, имеющими разные комбинации статусов и приоритетов

---

## Результаты тестирования

**Дата тестирования:** _______________

**Тестировщик:** _______________

**Общий результат:** 
- [ ] ✅ Все тесты пройдены
- [ ] ⚠️ Есть незначительные проблемы
- [ ] ❌ Есть критические проблемы

**Комментарии:**
_________________________________________________
_________________________________________________
_________________________________________________
