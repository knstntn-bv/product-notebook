# BIG-56: Перенос отображения архивных артефактов в меню настроек

## Бизнес-требование
См. `feature_requests/BIG-56 Перенос отображения архивных артефактов в меню настроек.md`

## Техническое описание реализации

### Текущее состояние

1. **RoadmapPage** (`src/pages/RoadmapPage.tsx`):
   - Локальный переключатель `showArchived` (строка 47) управляет отображением архивных целей
   - В таблице показываются только активные инициативы (строка 436: `.filter(initiative => !initiative.archived)`)
   - Цели фильтруются по `showArchived` (строки 222-225)

2. **StrategyPage** (`src/pages/StrategyPage.tsx`):
   - Архивные инициативы всегда отображаются с затемнением (строки 429-435)
   - Нет переключателя для скрытия архивных

3. **SettingsDialog** (`src/components/SettingsDialog.tsx`):
   - Содержит только настройку публичного доступа (`is_public`)
   - Использует таблицу `project_settings` в БД

### План реализации

#### 1. База данных
- Добавить поле `show_archived` (boolean, default `false`) в таблицу `project_settings`
- Создать миграцию для добавления поля

#### 2. SettingsDialog
- Добавить переключатель "Show archived items" в `SettingsDialog`
- Сохранять/загружать значение `show_archived` из `project_settings`
- Разместить переключатель рядом с настройкой публичного доступа

#### 3. Контекст для доступа к настройке
- Расширить `ProductContext` для хранения `showArchived`
- Загружать значение из `project_settings` при инициализации
- Обновлять при изменении в SettingsDialog

#### 4. StrategyPage
- Получать значение `showArchived` из контекста
- Если `showArchived === false`: показывать только активные инициативы (`.filter(i => !i.archived)`)
- Если `showArchived === true`: показывать все инициативы, архивные в конце с затемнением (текущая логика сортировки уже есть)

#### 5. RoadmapPage
- Удалить локальный переключатель `showArchived` (строки 410-421)
- Получать значение `showArchived` из контекста
- Если `showArchived === false`:
  - Показывать только строки активных инициатив (уже есть фильтр на строке 436)
  - Показывать только активные цели (логика уже есть в `getGoalsForCell`, строки 222-225)
- Если `showArchived === true`:
  - Показывать все инициативы (убрать фильтр на строке 436), архивные внизу
  - Показывать все цели (убрать фильтр в `getGoalsForCell`), архивные с затемнением

#### 6. Дополнительные изменения
- Обновить типы TypeScript для `project_settings` (если используется автогенерация)
- Убедиться, что настройка корректно работает в режиме read-only (shared view)

### Детали реализации

1. **Миграция БД:**
   ```sql
   ALTER TABLE public.project_settings 
   ADD COLUMN show_archived boolean NOT NULL DEFAULT false;
   ```

2. **Обновление SettingsDialog:**
   - Добавить состояние `showArchived`
   - Загружать при открытии диалога
   - Сохранять при изменении переключателя
   - Использовать тот же паттерн, что и для `is_public`

3. **Обновление ProductContext:**
   - Добавить поле `showArchived: boolean`
   - Загружать из `project_settings` при инициализации
   - Обновлять при изменении в SettingsDialog

4. **Фильтрация на страницах:**
   - StrategyPage: условная фильтрация инициатив
   - RoadmapPage: условная фильтрация инициатив и целей, удаление локального переключателя

### Ожидаемый результат

- Единый переключатель в настройках проекта
- Синхронизация отображения архивных элементов на всех страницах
- Сохранение настройки в БД (персистентность между сессиями)
- Удаление локального переключателя на странице роадмапа
- Консистентное поведение на страницах Strategy и Roadmap

